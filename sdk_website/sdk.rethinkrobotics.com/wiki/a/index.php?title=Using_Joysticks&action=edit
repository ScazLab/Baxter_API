<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>View source for Using Joysticks - sdk-wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Using_Joysticks","wgTitle":"Using Joysticks","wgCurRevisionId":3786,"wgRevisionId":0,"wgArticleId":305,"wgIsArticle":false,"wgIsRedirect":false,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":true,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Using_Joysticks","wgRelevantArticleId":305,"wgRequestId":"4ef4d526abaaae24ec61e572","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":["autoconfirmed"],"wgRestrictionMove":["autoconfirmed"]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","site":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready"});mw.loader.implement("user.tokens@01doy7a",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["mediawiki.action.edit.collapsibleFooter","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.cavendishmw-rethinkrobotics"]);});</script>
<link rel="stylesheet" href="load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor&amp;only=styles&amp;skin=cavendishmw-rethinkrobotics"/>
<script async="" src="load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=cavendishmw-rethinkrobotics"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=cavendishmw-rethinkrobotics"/>
<meta name="generator" content="MediaWiki 1.31.0"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="shortcut icon" href="../../favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://sdk.rethinkrobotics.com/wiki/a/opensearch_desc.php" title="sdk-wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="http://sdk.rethinkrobotics.com/wiki/a/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="sdk-wiki Atom feed" href="http://sdk.rethinkrobotics.com/wiki/a/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/wiki/a/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=cavendishmw-rethinkrobotics&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Using_Joysticks rootpage-Using_Joysticks skin-cavendishmw-rethinkrobotics action-edit"><div id="container"><!-- start fragment header -->
    <!-- <div id="mozilla-org"><a href="#">Mozilla Skin</a></div> -->
    <div id="header" class="noprint">
        <a name="top" id="contentTop"></a>

        <!-- Logo + site name -->
        <h1>
            <a href="../../wiki" style="text-indent: 2em; width: 194px; height: 67px; background: transparent url(skins/cavendishmw-rethinkrobotics/styles/images/header_logo.png) no-repeat scroll 5px -5px;" title="Visit the main page">&nbsp;</a>        </h1>

	<div id="rr_ActionWrap">
	<!-- Account action links -->
	<div id="accountActions"><a href="http://sdk-accounts.rethinkrobotics.com/public/NewUser">Create account</a><a href="http://sdk.rethinkrobotics.com/wiki/a/index.php?title=Special:UserLogin&amp;returnto=Using+Joysticks&amp;returntoquery=action%3Dedit">Log in</a></div>
        <!-- Search box -->
            <form action="http://sdk.rethinkrobotics.com/wiki/a/index.php" id="searchform">
        <label for="searchInput">Search</label>
        <input type='hidden' name="title" value="Special:Search"/>
        <input type="search" name="search" placeholder="Search sdk-wiki" title="Search sdk-wiki [f]" accesskey="f" id="searchInput"/>
        &#160;
        <input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>    </form>
	</div>
    </div> <!-- End header div -->
<!-- end fragment header --><div id="mBody"><!-- start fragment mainContent -->
<!-- start fragment firstHeader -->
<div id="firstHeadingDiv" class="firstHeading">
    <h1 lang="en"><span dir="auto">View source for Using Joysticks</span></h1>


        <!-- Content action buttons -->
        <ul><li><a href="index.php?title=Using_Joysticks&amp;action=edit#">More</a><ul><li id="ca-viewsource" class="selected"><a href="index.php?title=Using_Joysticks&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li id="ca-history"><a href="index.php?title=Using_Joysticks&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li></ul></li><li id="ca-nstab-main" class="selected"><a href="../Using_Joysticks" title="View the content page [c]" accesskey="c">Page</a></li></ul>
</div><!-- end fragment firstHeader --><!-- start fragment sidebar -->        <div id="side" class="noprint" > <!-- cavendishmw: s/column-one/side/ -->
            <ul id="nav">
                      <li><span>Navigation</span>
            <ul>
                <li id="n-Getting-Started"><a href="../Getting_Started">Getting Started</a></li>
                <li id="n-Learning"><a href="../Learning">Learning</a></li>
                <li id="n-Community"><a href="../Community">Community</a></li>
                <li id="n-Support"><a href="../Support">Support</a></li>
            </ul>
        </li>
      <li><span>Links</span>
            <ul class="collapsible-collapsed">
                <li id="n-Forum"><a href="https://groups.google.com/a/rethinkrobotics.com/forum/#!forum/brr-users" rel="nofollow">Forum</a></li>
                <li id="n-Source"><a href="https://github.com/RethinkRobotics" rel="nofollow">Source</a></li>
                <li id="n-Source-API"><a href="http://api.rethinkrobotics.com/" rel="nofollow">Source API</a></li>
            </ul>
        </li>
      <li><span>Tools</span>
            <ul class="collapsible-collapsed">
                <li id="n-All-Pages"><a href="../Special:AllPages">All Pages</a></li>
                <li id="n-Upload-File"><a href="../Special:Upload">Upload File</a></li>
                <li id="n-What-Links-Here.3F"><a href="../Special:WhatLinksHere">What Links Here?</a></li>
            </ul>
        </li>
            </ul> <!-- /nav -->
        </div> <!-- /side -->
<!-- end fragment sidebar -->
<div id="mainContent"> <!-- cavendishmw: s/column-content/mainContent/ -->
    
  <div id="bodyContent" class="mw-body">
    <div id="siteSub">From sdk-wiki</div>
    <div id="contentSub">← <a href="../Using_Joysticks" title="Using Joysticks">Using Joysticks</a></div>
    <div id="jump-to-nav" class="mw-jump">Jump to: <a href="index.php?title=Using_Joysticks&amp;action=edit#column-one">navigation</a>, <a href="index.php?title=Using_Joysticks&amp;action=edit#searchInput">search</a></div>
    
  <!-- start content -->
  <div id="mw-content-text"><p>You do not have permission to edit this page, for the following reasons:
</p>
<ul class="permissions-errors">
<li>The action you have requested is limited to users in the group: <a href="http://sdk.rethinkrobotics.com/wiki/a/index.php?title=Sdk-wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Sdk-wiki:Users (page does not exist)">Users</a>.</li>
<li>This page has been protected to prevent editing or other actions.</li>
</ul>
<hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" class="mw-editfont-monospace" lang="en" dir="ltr" name="wpTextbox1">== Summary ==
A number of examples in the RSDK use game controllers, or joysticks, to interact with Baxter.  There is also a python utility for handling input devices like joysticks with common methods.

== Overview ==
The ROS package &lt;code>joy&lt;/code> makes it easy to use gamepad controllers in ROS programs by publishing the buttons and stick axes on a ROS Topic.  Examples in the RSDK use this package to let users control Baxter with a joystick.

Any joystick controller supported by Linux should be compatible with the ROS &lt;code>joy&lt;/code> package.  Running the ROS &lt;code>joy_node&lt;/code> publishes the input values on the &lt;code>/joy&lt;/code> topic.  The RSDK python examples then use a convenience class to map the array of button and axes values on this topic to a named dictionary.  Every model of controller has a different definition of which button is which, so this class allows us to consistently map inputs to the same variables across brands.  The RSDK examples themselves then use these consistent dictionary names and load the mapping the user indicates in an argument when you start the example.

=== Examples using joysticks ===
There are a couple [[Example Programs|RSDK examples]] already setup to use the joysticks to control Baxter.  These can often be run in parallel with other tasks and programs and make it easier to position and coordinate Baxter while using the RSDK.  Joystick examples include:  
* [[Joint Position Example]]
* [[Gripper Example]]

== Running the Joystick Examples ==

==== Installing ROS Joystick Drivers ====
First ensure that the joy drivers are installed. 
&lt;source lang="bash">
$ rospack find joy  
= /opt/ros/indigo/share/joy =
&lt;/source>
If not run:
&lt;source lang="bash">
$ sudo apt-get install ros-indigo-joystick-drivers  
&lt;/source>
''Substitute the appropriate ROS 'distro' for &lt;code>indigo&lt;/code> if you are running other ROS distributions.''

==== Running the ROS joystick publisher ====
Plug in your joystick and verify the computer can see the input device:
&lt;source lang="bash">
$ ls /dev/input/js*
/dev/input/js0
&lt;/source>
''If using a PS3 joystick, see [[Using Joysticks#using-the-ps3-joystick|Using a PS3 Joystick]] in order to make the device appear.''

From an [[RSDK Shell]] start the &lt;code>joy_node&lt;/code>:
&lt;source lang="bash">
$ rosrun joy joy_node  
&lt;/source>
You should now be able to verify the ROS joystick part is working by echoing the &lt;code>/joy&lt;/code> topic and seeing the joystick inputs being published when you use the joystick:
&lt;source lang="bash">
= in an RSDK shell: =
$ rostopic echo /joy
&lt;/source>

=== Running the RSDK Joystick Examples ===
==== Manual Start Method ====
For the joystick examples to work, the &lt;code>joy_node&lt;/code> driver must be running at the same time as the example.

To manually start examples that use a joystick, you can run the '''joy_node''' program (joystick driver) in one terminal and the joint_position '''example''' in a second terminal:

1. If you haven't already run the &lt;code>joy_node&lt;/code> from the previous step:
&lt;source lang="bash">
$ rosrun joy joy_node
&lt;/source>

2. In a '''second''' [[RSDK Shell]], run the example program and pass it the type of joystick you are using in the &lt;code>&lt;joystick_type>&lt;/code> argument (e.g. 'logitech'):
&lt;source lang="bash">
$ rosrun joint_position joystick.py &lt;joystick_type>
&lt;/source>
Where &lt;code>&lt;joystick_type>&lt;/code> is 'xbox', 'logitech', or 'ps3'.  
''(If using a ps3, make sure you run the node from the ROS ps3joy package in a separate sudo terminal.  See instructions here: [http://www.ros.org/wiki/ps3joy/Tutorials/PairingJoystickAndBluetoothDongle ps3joy] )''

=== Alternative Automatic Starting Joystick Example Programs ===
Examples that offer joystick integration will also include a special start script specifically for starting up the joystick drivers and the example at the same time.  This script is usually called &lt;code>joystart&lt;/code>.

'''''RSDK Beta Version:''''' To run the example:
&lt;source lang="bash">
$ rosrun joint_position joystart &lt;joystick_type>  
&lt;/source>

For the joystick examples to work, the joy_node driver must be running at the same time as the example. Using any one-line command to launch or start a joystick example is actually just using a short-cut to start the two programs at once.

== Alternate Options ==
=== Specifying an input device ===
The joystick device used defaults to &lt;code>/dev/input/js0&lt;/code>.  If you have multiple input devices connected or want to specify a specific device to use, you can use the following commands.

List current input devices:
&lt;source lang="bash">
$ ls /dev/input/js*
/dev/input/js0  /dev/input/js1
&lt;/source>

From an [[RSDK Shell]], ''before'' starting the ROS node, set the &lt;code>joy_node&lt;/code> input device ROS Paramater, &lt;code>~/dev&lt;/code>, to your desired input device:
&lt;source lang="bash">
$ rosparam set /joy_node/dev /dev/input/js1  
&lt;/source>

Then start the example with either the Automatic or Manual method:
&lt;source lang="bash">
$ rosrun joint_position joystart &lt;joystick_type>
&lt;/source>

=== Using the PS3 Joystick ===
The PS3 SIXAXIS or DUALSHOCK3 joysticks require an additional component to run in order to support the bluetooth and special features of the joysticks.  These drivers are thankfully taken care of in the ROS [http://www.ros.org/wiki/ps3joy ps3joy] package (included in the &lt;code>ros-&lt;distro>-joystick-drivers&lt;/code> install).

==== Install ROS Joystick drivers ====
&lt;tabs>
&lt;tab name="ROS Indigo">
&lt;source lang="bash">
$ sudo apt-get install ros-indigo-joystick-drivers
&lt;/source>
&lt;/tab>
&lt;tab name="ROS Hydro">
&lt;source lang="bash">
$ sudo apt-get install ros-hydro-joystick-drivers
&lt;/source>
&lt;/tab>
&lt;tab name="ROS Groovy">
&lt;source lang="bash">
$ sudo apt-get install ros-groovy-joystick-drivers
&lt;/source>
&lt;/tab>
&lt;/tabs>

Make sure dependencies are installed:
&lt;source lang="bash">
$ rosdep update
$ rosdep install ps3joy
&lt;/source>

==== Pairing Controller ====
Set Controller’s target to this PC’s Bluetooth Address:
* Plug PS3 into computer using USB cable.
&lt;source lang="bash">
$ cd ~/ros_ws
$ sudo ./baxter.sh
$ rosrun ps3joy sixpair

&lt;/source>

==== Connecting Bluetooth Controller for Use (Each Session) ====

In a background terminal, run joystick connection/driver:
&lt;source lang="bash">
$ cd ~/ros_ws
$ sudo ./baxter.sh
$ rosrun ps3joy ps3joy.py
&lt;/source>

Activate connection:
* Press ‘Playstation’ Pairing Button on Controller (unplugged).
* Lights will start flashing rapidly and terminal will say Connection is Activated.
* Leave terminal / program running in background.

Controller will now show up as /dev/input/js*. Can now be run like normal joystick.

==== Running Examples with a PS3 Controller ====
Run joystart script for examples like normal, using ‘ps3’ mapping argument, e.g:
&lt;source lang="bash">
$ cd ~/ros_ws
$ ./baxter.sh
$ rosrun baxter_examples joint_position_joystick.py -j ps3
&lt;/source>

=== Joystick Button Mappings ===
Look at the wiki page for individual examples to see how the buttons are mapped.  Make sure you start the examples with the correct type of joystick selected, as they change per device type.  You can modify or create your own joystick mappings by editing the joystick script via &lt;code>rosed baxter_examples joystick.py&lt;/code>.
</textarea><div class="templatesUsed"></div><p id="mw-returnto">Return to <a href="../Using_Joysticks" title="Using Joysticks">Using Joysticks</a>.</p>
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="../Using_Joysticks">http://sdk.rethinkrobotics.com/wiki/Using_Joysticks</a>"</div>
  <div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>  <!-- end content -->
  
    <div class="visualClear"></div>
</div>
</div> <!-- /mainContent -->
<!-- end fragment mainContent --></div> <!-- /mBody --><div class="visualClear"></div><!-- start fragment footer -->    <div id="footer" role="contentinfo">
        <div id="f-poweredbyico">
                <a href="http://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/wiki/a/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /wiki/a/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
            </div>
        <ul id="f-list">
                <li id="copywrite_notice">&copy; 2015 Rethink Robotics. All rights reserved.</li>
                <li id="special_pages"><a href="../Special:SpecialPages" title="Special:SpecialPages">SpecialPages</a></li>
                <li id="privacy"><a href="../Sdk-wiki:Privacy_policy" title="Sdk-wiki:Privacy policy">Privacy policy</a></li>
                <li id="about"><a href="../Sdk-wiki:About" title="Sdk-wiki:About">About sdk-wiki</a></li>
                <li id="disclaimer"><a href="../Sdk-wiki:General_disclaimer" title="Sdk-wiki:General disclaimer">Disclaimers</a></li>
            </ul>
    </div><!-- end fragment footer --></div><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":50});});</script></body></html>